{
	"info": {
		"_postman_id": "29d392ee-3bac-4c5e-b8d7-3d56a095bb9a",
		"name": "Team7_Dietician_Phase1APIHackathon_2024",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "37338917",
		"_collection_link": "https://postman-geeks-6315.postman.co/workspace/Team7_Dietician_Phase1APIHackat~68a54a3c-24f0-468f-a13f-3a4f28686c5b/collection/37338917-29d392ee-3bac-4c5e-b8d7-3d56a095bb9a?action=share&source=collection_link&creator=37338917"
	},
	"item": [
		{
			"name": "Patient",
			"item": [
				{
					"name": "AddReportsForExistingPatient",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var JsonData = pm.response.json();\r",
									"var Patient_Email = JsonData.Email;\r",
									"\r",
									"pm.environment.set(\"Patient_Email\", Patient_Email );\r",
									"\r",
									"pm.test(\"Verify Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{Dietician_Token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "patientInfo",
									"value": "{ \"FirstName\": \"PatientThirteen\",\"LastName\": \"PatientThirteenLastName\",\"ContactNumber\": \"6763977889\",\"Email\": \"thirteenthPatientOnline@yahoo.com\",\"Allergy\": \"SOY\",\"FoodPreference\": \"Vegan\",\"CuisineCategory\":\"Kerala\",\"DateOfBirth\": \"1985-01-28\"}",
									"type": "text"
								},
								{
									"key": "file",
									"type": "file",
									"src": "postman-cloud:///1ef50cc9-f80e-45f0-b1d1-866c01f86e3e",
									"disabled": true
								},
								{
									"key": "Vitals",
									"value": "{\"fileId\":{\"Weight\" :11.0,\"Height\" :11.0,\"Temperature\" : 1.0,\"SP\" :1,\"DP\" :1}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseURl}}patient/newReports/{{Patient_Id}}",
							"host": [
								"{{baseURl}}patient"
							],
							"path": [
								"newReports",
								"{{Patient_Id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Reports For Existing Patient-Data Driven",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.request.body.update({\r",
									"\r",
									"     mode: \"formdata\",\r",
									"\r",
									"     formdata: [\r",
									"\r",
									"       { key: \"patientInfo\", type: \"text\", value: { \r",
									"\"FirstName\": \"{{p_FirstName}}\",\r",
									"\"LastName\": \"{{p_Lastname}}\",\r",
									"\"ContactNumber\": \"{{p_ContactNumber}}\",\r",
									"\"Email\": \"{{p_Email}}\",\r",
									"\"Allergy\": \"{{p_Allergy}}\",\r",
									"\"FoodPreference\": \"{{p_FoodPreferences}}\",\r",
									"\"CuisineCategory\":\"{{p_CuisineCatergory}}\",\r",
									"\"DateOfBirth\": \"{{p_DateOfBirth}}\"\r",
									"}},\r",
									"\r",
									"       { key: \"file\", type: \"file\", src: \"{{file}}\"}\r",
									"\r",
									"     ]\r",
									"\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"var JsonData = pm.response.json();\r",
									"var Patient_Email = JsonData.Email;\r",
									"\r",
									"pm.environment.set(\"Patient_Email\", Patient_Email );\r",
									"\r",
									"pm.test(\"Verify Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{Dietician_Token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "patientInfo",
									"value": "{ \n\"FirstName\": \"{{p_FirstName}}\",\n\"LastName\": \"{{p_Lastname}}\",\n\"ContactNumber\": \"{{p_ContactNumber}}\",\n\"Email\": \"{{p_Email}}\",\n\"Allergy\": \"{{p_Allergy}}\",\n\"FoodPreference\": \"{{p_FoodPreferences}}\",\n\"CuisineCategory\":\"{{p_CuisineCatergory}}\",\n\"DateOfBirth\": \"{{p_DateOfBirth}}\"\n}\n",
									"type": "text"
								},
								{
									"key": "file",
									"type": "file",
									"src": "postman-cloud:///1ef50cc9-f80e-45f0-b1d1-866c01f86e3e"
								},
								{
									"key": "Vitals",
									"value": "{  “Weight“ : {{Weight}},“Height” : {{Height}},“Temperature” : {{Temperature}},“SP” : {{SP}},“DP” : {{DP}}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseURl}}patient/newReports/{{Patient_Id}}",
							"host": [
								"{{baseURl}}patient"
							],
							"path": [
								"newReports",
								"{{Patient_Id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Patient",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var JsonData = pm.response.json();\r",
									"var Patient_Email = JsonData.Email;\r",
									"\r",
									"pm.environment.set(\"Patient_Email\", Patient_Email ); \r",
									"var Patient_Id=JsonData.patientId;\r",
									"pm.environment.set(\"Patient_Id\",Patient_Id);\r",
									"\r",
									"pm.test(\"Verify Status code is 201\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{Dietician_Token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "patientInfo",
									"value": " { \"FirstName\": \"PatientFifteen\",\"LastName\": \"PatientFifteenLastName\",\"ContactNumber\": \"6763977811\",\"Email\": \"thirteenthPatientOnline@yahoo.com\",\"Allergy\": \"SOY\",\"FoodPreference\": \"Vegan\",\"CuisineCategory\":\"Kerala\",\"DateOfBirth\": \"1985-01-28\"}",
									"type": "text"
								},
								{
									"key": "file",
									"type": "file",
									"src": "postman-cloud:///1ef51edb-4dac-4570-9d53-243fb0df75af"
								},
								{
									"key": "",
									"value": "",
									"type": "text",
									"disabled": true
								}
							]
						},
						"url": {
							"raw": "{{baseURl}}patient",
							"host": [
								"{{baseURl}}patient"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get All Patients",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{Dietician_Token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURl}}patient",
							"host": [
								"{{baseURl}}patient"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Report Of Patient By Patient Id",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{Patient_Token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURl}}patient/testReports/{{Patient_Id}}",
							"host": [
								"{{baseURl}}patient"
							],
							"path": [
								"testReports",
								"{{Patient_Id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Report By File Id",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{Patient_Token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURl}}patient/testReports/viewFile/{{FileId}}",
							"host": [
								"{{baseURl}}patient"
							],
							"path": [
								"testReports",
								"viewFile",
								"{{FileId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Report By File Id Data Driven",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var JsonData = pm.response.json();\r",
									"pm.test(\"Validating Status Code\", ()=> {\r",
									"    pm.expect(pm.response.code).to.eql(pm.variables.get(\"statusCode\"));\r",
									"});\r",
									"var statusCode = pm.response.code;\r",
									"\r",
									"// Check if the status code is 200\r",
									"if (statusCode === 200) {\r",
									"    console.log('Status code is 200. Running assertions...');\r",
									"\r",
									"pm.expect(JsonData.fileId).to.equal(pm.environment.get(\"fileId\"));\r",
									"\r",
									"\r",
									"}else {\r",
									"    console.log(`Status code is ${statusCode}. Assertions skipped.`);\r",
									"}\r",
									" \r",
									"//pm.execution.setNextRequest(\"Delete_Dietician_ByID\");\r",
									"\r",
									"                                                                                                                                                                                       "
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{Patient_Token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURl}}{{Endpoint}}",
							"host": [
								"{{baseURl}}{{Endpoint}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Dietician",
			"item": [
				{
					"name": "Create Dietician",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var JsonData = pm.response.json();\r",
									"var Dietician_Email = JsonData.Email;\r",
									"var Dietician_Login_Password=JsonData.loginPassword;\r",
									"pm.environment.set(\"Dietician_Email\", Dietician_Email );\r",
									"pm.environment.set(\"Dietician_Login_Password\",Dietician_Login_Password);\r",
									"var Dietician_Id=JsonData.id;\r",
									"pm.environment.set(\"Dietician_Id\",Dietician_Id);\r",
									"\r",
									"pm.test(\"Verify Status code is 201\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{Admin_Token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n\"ContactNumber\":\"7877995431\",\r\n\"DateOfBirth\":\"1985-07-11T11:23:12.570Z\",\r\n\"Education\":\"mbbs\",\r\n\"Email\":\"myeleventhDieticianOnline1@yahoo.com\",\r\n\"Firstname\":\"tom\",\r\n\"HospitalCity\":\"we\",\r\n\"HospitalName\":\"stwering\",\r\n\"HospitalPincode\":\"657654\",\r\n\"HospitalStreet\":\"dfd\",\r\n\"Lastname\": \"thomas\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseURl}}dietician",
							"host": [
								"{{baseURl}}dietician"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Admin Token",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"var JsonData = pm.response.json();\r",
							"var AdminToken = JsonData.token;\r",
							"pm.environment.set(\"Admin_Token\",AdminToken);"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"password\": \"test\",\r\n  \"userLoginEmail\" : \"team7@gmail.com\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseURl}}login",
					"host": [
						"{{baseURl}}login"
					]
				}
			},
			"response": []
		},
		{
			"name": "Patient Token",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"var JsonData = pm.response.json();\r",
							"var PatientToken = JsonData.token;\r",
							"pm.environment.set(\"Patient_Token\",PatientToken);"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"password\": \"test\",\r\n  \"userLoginEmail\" :\"ninthPatientOnline@yahoo.com\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseURl}}login",
					"host": [
						"{{baseURl}}login"
					]
				}
			},
			"response": []
		},
		{
			"name": "Dietician Token",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"var JsonData = pm.response.json();\r",
							"var DieticianToken = JsonData.token;\r",
							"pm.environment.set(\"Dietician_Token\",DieticianToken);"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"password\": \"Prosper09\",\r\n  \"userLoginEmail\" : \"myeleventhDieticianOnline1@yahoo.com\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseURl}}login",
					"host": [
						"{{baseURl}}login"
					]
				}
			},
			"response": []
		},
		{
			"name": "Add Reports For Existing Patient-Data Driven Copy",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"const response = pm.response.json();\r",
							"console.log(response);\r",
							"\r",
							"pm.test(\"Validating Status Code\", ()=> {\r",
							"    pm.expect(pm.response.code).to.eql(pm.variables.get(\"statusCode\"));\r",
							"});\r",
							"\r",
							"const jsonSchema = {\r",
							"  \"type\": \"object\",\r",
							"  \"properties\": {\r",
							"    \"patientId\": {\r",
							"      \"type\": \"integer\"\r",
							"    },\r",
							"    \"FirstName\": {\r",
							"      \"type\": \"string\"\r",
							"    },\r",
							"    \"LastName\": {\r",
							"      \"type\": \"string\"\r",
							"    },\r",
							"    \"ContactNumber\": {\r",
							"      \"type\": \"string\"\r",
							"    },\r",
							"    \"Email\": {\r",
							"      \"type\": \"string\",\r",
							"      \"format\": \"email\"\r",
							"    },\r",
							"    \"Allergy\": {\r",
							"      \"type\": \"string\"\r",
							"    },\r",
							"    \"FoodPreference\": {\r",
							"      \"type\": \"string\"\r",
							"    },\r",
							"    \"CuisineCategory\": {\r",
							"      \"type\": \"string\"\r",
							"    },\r",
							"    \"FileMorbidity\": {\r",
							"      \"type\": \"object\",\r",
							"      \"properties\": {\r",
							"        \"66ad4e104717cf471aaad141\": {\r",
							"          \"type\": \"object\",\r",
							"          \"properties\": {\r",
							"            \"T4\": {\r",
							"              \"type\": \"string\"\r",
							"            },\r",
							"            \"TSH\": {\r",
							"              \"type\": \"string\"\r",
							"            }\r",
							"          }\r",
							"           \r",
							"        }\r",
							"      }\r",
							"       \r",
							"    },\r",
							"    \"FileMorbidityCondition\": {\r",
							"      \"type\": \"object\",\r",
							"      \"properties\": {\r",
							"        \"66ad4e104717cf471aaad141\": {\r",
							"          \"type\": \"string\"\r",
							"        }\r",
							"      }\r",
							"    },\r",
							"    \"DateOfBirth\": {\r",
							"      \"type\": \"string\",\r",
							"      \"format\": \"date\"\r",
							"    },\r",
							"    \"DieticianId\": {\r",
							"      \"type\": \"integer\"\r",
							"    },\r",
							"    \"Vitals\": {\r",
							"      \"type\": \"object\",\r",
							"      \"properties\": {\r",
							"        \"66ad4e104717cf471aaad141\": {\r",
							"          \"type\": \"object\",\r",
							"          \"properties\": {\r",
							"            \"Weight\": {\r",
							"              \"type\": \"integer\"\r",
							"            },\r",
							"            \"Height\": {\r",
							"              \"type\": \"integer\"\r",
							"            },\r",
							"            \"Temperature\": {\r",
							"              \"type\": \"integer\"\r",
							"            },\r",
							"            \"SP\": {\r",
							"              \"type\": \"integer\"\r",
							"            },\r",
							"            \"DP\": {\r",
							"              \"type\": \"integer\"\r",
							"            }\r",
							"          }\r",
							"           \r",
							"        }\r",
							"      }\r",
							"      \r",
							"    },\r",
							"    \"LastVisitDate\": {\r",
							"      \"type\": \"string\",\r",
							"      \"format\": \"date-time\"\r",
							"    }\r",
							"  }\r",
							"   \r",
							"};\r",
							"if(pm.response.code === 200)\r",
							"{\r",
							"pm.test('Status String is OK', () => {\r",
							"pm.response.to.have.status(\"OK\");})\r",
							"\r",
							"pm.test(\"Verify JSON Schema\",function(){\r",
							"    pm.response.to.have.jsonSchema(jsonSchema);\r",
							"});\r",
							"}\r",
							"pm.test(\"Content-Type is present\", function () {\r",
							"    pm.response.to.have.header(\"Content-Type\");\r",
							"});\r",
							"pm.test(\"Content-Type header is application/json\", ()=>{\r",
							" pm.expect(pm.response.headers.get('Content-Type')).to.eql('application/json');\r",
							"});\r",
							"pm.test('Validating Response is not NULL', function () {\r",
							"pm.expect(response).to.not.equal(null);})\r",
							"\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{DieticianBearer_Token}}",
							"type": "string"
						}
					]
				},
				"method": "PUT",
				"header": [],
				"body": {
					"mode": "formdata",
					"formdata": [
						{
							"key": "patientInfo",
							"value": "{ \n\"FirstName\": \"{{p_FirstName}}\",\n\"LastName\": \"{{p_Lastname}}\",\n\"ContactNumber\": \"{{p_ContactNumber}}\",\n\"Email\": \"{{p_Email}}\",\n\"Allergy\": \"{{p_Allergy}}\",\n\"FoodPreference\": \"{{p_FoodPreferences}}\",\n\"CuisineCategory\":\"{{p_CuisineCatergory}}\",\n\"DateOfBirth\": \"{{p_DateOfBirth}}\"\n}\n",
							"type": "text"
						},
						{
							"key": "file",
							"type": "file",
							"src": "postman-cloud:///1ef51f50-866d-48d0-b6b2-159c9b8a0252"
						},
						{
							"key": "vitals",
							"value": "{  “Weight“ : {{Weight}},“Height” : {{Height}},“Temperature” : {{Temperature}},“SP” : {{SP}},“DP” : {{DP}}}",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{BaseURL}}{{Endpoint}}",
					"host": [
						"{{BaseURL}}{{Endpoint}}"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					"if (typeof pm.variables.get('requestdata') !== 'object') {\r",
					"    pm.variables.set('requestdata', pm.iterationData.toObject());\r",
					"}\r",
					"const requestdata = pm.variables.get('requestdata');\r",
					"\r",
					"if(typeof requestdata !== 'object' || Object.keys(requestdata).length ===0) {\r",
					"    console.log(\"No external file found\")\r",
					"    return;\r",
					"}\r",
					"\r",
					"const currentrequest = requestdata.requests.filter(({name}) => name === pm.info.requestName) [0];\r",
					"if(!currentrequest){\r",
					"    console.log(`Request ${pm.info.requestName} has no data defined.`);\r",
					"}\r",
					"\r",
					"const variables = currentrequest.data.shift();\r",
					"\r",
					"Object.entries(variables).forEach(([key, value]) => {\r",
					"        pm.variables.set(key, value);\r",
					"    });\r",
					"\r",
					"pm.variables.set('requestdata',requestdata);\r",
					"if(currentrequest.data.length > 0){\r",
					"    pm.execution.setNextRequest(pm.info.requestName)\r",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "InvalidPatientId",
			"value": "7654",
			"type": "string"
		}
	]
}